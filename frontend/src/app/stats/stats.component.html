<div class="chaotic-container-wide-center">
  <chaotic-title
    title="Statistics and data"
    subtitleHtml="Area for package statistics and other fun stuff.<br>Total users last month: {{
      statsService.totalUsers()
    }}<br>All stats shown here are currently relating to one month of data."
  ></chaotic-title>

  <div>
    <p-tabs [(value)]="statsService.currentTab" (valueChange)="changeTab($event)">
      <p-tablist>
        <p-tab value="0" pTooltip="Search for package statistics" tooltipPosition="bottom">Search</p-tab>
        <p-tab value="1" pTooltip="Global usage statistics" tooltipPosition="bottom">Globals</p-tab>
        <p-tab value="2" pTooltip="Download statistics and trends" tooltipPosition="bottom">Downloads</p-tab>
        <p-tab value="3" pTooltip="Update review statistics" tooltipPosition="bottom">Update Reviews</p-tab>
        <p-tab value="4" pTooltip="Builder performance statistics" tooltipPosition="bottom">Builder Stats</p-tab>
      </p-tablist>
      <p-tabpanels>
        <p-tabpanel value="0">
          <chaotic-search-package></chaotic-search-package>
        </p-tabpanel>
        <p-tabpanel value="1">
          <div class="mb-8">
            <p-card [style]="{ width: '100%', overflow: 'hidden' }" header="Country list">
              <chaotic-chart-countries></chaotic-chart-countries>
            </p-card>
          </div>
          <div class="mt-8">
            <p-card [style]="{ width: '100%', overflow: 'hidden' }" header="User agents">
              <chaotic-chart-useragent></chaotic-chart-useragent>
            </p-card>
          </div>
        </p-tabpanel>
        <p-tabpanel value="2">
          <chaotic-chart-downloads></chaotic-chart-downloads>
        </p-tabpanel>
        <p-tabpanel value="3">
          <chaotic-chart-review-stats></chaotic-chart-review-stats>
        </p-tabpanel>
        <p-tabpanel value="4">
          <div class="mb-8">
            <p-card [style]="{ width: '100%', overflow: 'hidden' }" header="Builds per Day">
              <chaotic-chart-builds-per-day></chaotic-chart-builds-per-day>
            </p-card>
          </div>
          <div class="mb-8">
            <p-card [style]="{ width: '100%', overflow: 'hidden' }" header="Builds per Builder">
              <chaotic-chart-builders-amount></chaotic-chart-builders-amount>
            </p-card>
          </div>
          <div class="mb-8">
            <p-card [style]="{ width: '100%', overflow: 'hidden' }" header="Average Build Time per Status">
              <chaotic-chart-average-build-time></chaotic-chart-average-build-time>
            </p-card>
          </div>
          <div class="mb-8">
            <p-card [style]="{ width: '100%', overflow: 'hidden' }" header="Popular Packages">
              <chaotic-chart-popular-packages></chaotic-chart-popular-packages>
            </p-card>
          </div>
        </p-tabpanel>
      </p-tabpanels>
    </p-tabs>
  </div>
</div>
