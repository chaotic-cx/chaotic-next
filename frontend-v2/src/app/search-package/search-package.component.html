<div>
  <p-auto-complete
    #autoComplete
    [forceSelection]="true"
    [suggestions]="currentSuggestions"
    (completeMethod)="search($event)"
    (onSelect)="updateDisplay($event.value)"
    placeholder="Search a package name"
  ></p-auto-complete>
</div>
<div class="min-h-footer">
  @if (!initialSearchDone) {
    <div class="mx-auto">
      <i class="pi pi-search text-maroon mt-36" style="font-size: 10rem"></i>
    </div>
  }
  <p-table [value]="data" [tableStyle]="{ width: '100%', 'margin-top': '20px' }" [loading]="loading()">
    <ng-template #body let-dataset>
      <tr>
        <td>{{ dataset.key | packageDetailKey }}</td>
        @if (dataset.key === 'url') {
          <td>
            <a [href]="dataset.value" target="_blank" class="text-mauve" rel="noopener noreferrer">{{
              dataset.value
            }}</a>
          </td>
        } @else if (dataset.key === 'buildDate') {
          <td>{{ dataset.value | unixDate }}</td>
        } @else if (dataset.key === 'lastUpdated') {
          <td>{{ dataset.value | date }}</td>
        } @else if (typeof dataset.value !== "string" && dataset.value?.length > 0) {
          <td>
            <ul>
              <li *ngFor="let item of dataset.value">- {{ item }}</li>
            </ul>
          </td>
        } @else if (!dataset.value) {
          <td class="text-gray-500">N/A</td>
        } @else {
          <td>{{ dataset.value }}</td>
        }
      </tr>
    </ng-template>
  </p-table>
</div>
